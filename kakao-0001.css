/* 
  Chub.ai Ant Design Override - KakaoTalk Theme 
  Author: Antigravity
  Description: Overrides standard Ant Design list classes to mimic KakaoTalk's UI.
  Target: Chat Interface using .ant-list-item-meta structure.
*/

/* =========================================
   1. GLOBAL VARIABLES & RESET
   ========================================= */
:root {
  --kakao-bg: #bacee0;          /* Standard Kakao Blue-Grey Background */
  --kakao-yellow: #FEE500;      /* Kakao Brand Yellow (User Bubbles) */
  --kakao-white: #FFFFFF;       /* Other Bubbles */
  --kakao-text: #000000;
  --kakao-meta: #666666;
  --kakao-radius: 12px;
}

/* Force the main chat container background */
/* Note: You may need to verify the exact container class. 
   Commonly it's body or a specific layout wrapper. */
body, 
.ant-layout, 
.ant-layout-content,
div[class*="chat-history"],
.chat-container {
  background-color: var(--kakao-bg) !important;
}

/* =========================================
   2. MESSAGE ROW (LIST ITEM)
   ========================================= */
/* Remove default separators and spacing */
.ant-list-item {
  border-bottom: none !important;
  padding: 8px 12px !important;
  display: flex !important;
  align-items: flex-start !important;
}

/* main flex container for the message */
.ant-list-item-meta {
  display: flex !important;
  align-items: flex-start !important;
  width: 100% !important;
  margin-bottom: 2px !important;
}

/* =========================================
   3. AVATAR STYLING
   ========================================= */
.ant-list-item-meta-avatar {
  margin-right: 10px !important;
  align-self: flex-start;
}

/* Make avatars rounded squircle like modern iOS/Kakao */
.ant-list-item-meta-avatar .ant-avatar,
.ant-list-item-meta-avatar img {
  width: 42px !important;
  height: 42px !important;
  border-radius: 42% !important; /* Squircle effect */
  border: 1px solid rgba(0,0,0,0.05);
  background: #fff;
}

/* =========================================
   4. MESSAGE CONTENT WRAPPER
   ========================================= */
.ant-list-item-meta-content {
  display: flex !important;
  flex-direction: column !important;
  align-items: flex-start !important;
  width: auto !important;
  max-width: 85% !important;
}

/* =========================================
   5. MESSAGE HEADER (NAME)
   ========================================= */
.ant-list-item-meta-title {
  font-size: 13px !important;
  color: #4b4b4b !important;
  font-weight: 500 !important;
  margin-bottom: 4px !important;
  margin-left: 2px !important;
  line-height: 1.2 !important;
}

/* Hide the user name if it's the current user (if distinct class exists) 
   or styling it to be subtle. */

/* =========================================
   6. BUBBLE STYLING (DESCRIPTION)
   ========================================= */
.ant-list-item-meta-description {
  position: relative !important;
  background-color: var(--kakao-white) !important;
  color: var(--kakao-text) !important;
  padding: 8px 12px !important;
  border-radius: 2px 14px 14px 14px !important; /* Top-left corner sharp for tail */
  box-shadow: 0 1px 1px rgba(0,0,0,0.05) !important;
  font-size: 14px !important;
  line-height: 1.5 !important;
  width: fit-content !important;
  min-width: 20px;
}

/* Message Tail (Left Side) */
.ant-list-item-meta-description::before {
  content: "";
  position: absolute;
  top: 0px;
  left: -6px;
  width: 0;
  height: 0;
  border-style: solid;
  border-width: 0 8px 8px 0;
  border-color: transparent var(--kakao-white) transparent transparent;
  display: block;
}

/* Ensure text inside bubbles is readable */
.ant-list-item-meta-description * {
  color: inherit; /* Allow inner span colors (like red text) to persist if inline, otherwise inherit black */
}

/* Markdown Container fixes */
.msg-mkdn-container p {
  margin: 0 !important;
}

/* =========================================
   7. USER MESSAGES (RIGHT SIDE)
   ========================================= */
/* 
   Since we cannot verify the exact class for user messages in the HTML,
   we provide this selector assuming a common pattern.
   
   SCENARIO A: The app adds a class like `.is-me`, `.user-msg`, or `.right`.
   SCENARIO B: The container uses `flex-direction: row-reverse`.
   SCENARIO C: We use a CSS trick involving `margin-left: auto`.
   
   UNCOMMENT/ADJUST the below if you can identify the unique User class.
*/

/* Example: If user messages have a class 'is-user' on the list item */
/*
.ant-list-item.is-user .ant-list-item-meta {
  flex-direction: row-reverse !important;
}

.ant-list-item.is-user .ant-list-item-meta-avatar {
  margin-right: 0 !important;
  margin-left: 10px !important;
  display: none !important; /* Kakao usually hides my avatar */
}

.ant-list-item.is-user .ant-list-item-meta-content {
  align-items: flex-end !important;
}

.ant-list-item.is-user .ant-list-item-meta-title {
  display: none !important; /* Hide my name */
}

.ant-list-item.is-user .ant-list-item-meta-description {
  background-color: var(--kakao-yellow) !important;
  border-radius: 14px 2px 14px 14px !important; /* Top-right corner sharp */
}

.ant-list-item.is-user .ant-list-item-meta-description::before {
  left: auto !important;
  right: -6px !important;
  border-width: 8px 8px 0 0 !important;
  border-color: var(--kakao-yellow) transparent transparent transparent !important; 
  /* Adjust tail rotation */
  transform: rotate(90deg);
}
*/


/* =========================================
   8. INPUT AREA OVERRIDES
   ========================================= */
/* Target the input area wrapper container if possible */
.ant-layout-footer,
div[class*="input-container"] {
  background-color: #FFF !important;
  border-top: 1px solid #e0e0e0 !important;
  padding: 10px !important;
}

/* Input box itself */
textarea.ant-input {
  background-color: #f3f3f3 !important;
  border: 1px solid #ededed !important;
  border-radius: 20px !important;
  padding: 8px 12px !important;
  resize: none !important;
}

textarea.ant-input:focus {
  background-color: #fff !important;
  border-color: var(--kakao-yellow) !important; /* Yellow focus ring */
  box-shadow: 0 0 0 2px rgba(254, 229, 0, 0.2) !important;
}

/* Send Button */
button.ant-btn-primary {
  background-color: var(--kakao-yellow) !important;
  border-color: var(--kakao-yellow) !important;
  color: #000 !important; /* Black text on yellow */
}
