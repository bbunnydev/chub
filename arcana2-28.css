/*
=================================================================
  ARCANA V2 THEME STYLESHEET (TEMPLATE VERSION)
  FINAL CORRECTED VERSION
=================================================================
*/

/*
////////////////////////////////////////////////////////////////////////////////
// 1. GLOBAL & BODY STYLES
////////////////////////////////////////////////////////////////////////////////
*/

.arcana2-theme {  
  /* --- Creates a stacking context so z-index works reliably --- */
  position: relative;
  isolation: isolate;
}

/* This creates the full-screen background as a pseudo-element of the theme container */
body::before {
  content: "";
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: 
    linear-gradient(135deg, var(--arcana-accent) 0%, var(--arcana-accent) 10%, #000 10%, #000 100%), 
    linear-gradient(-45deg, var(--arcana-accent) 0%, var(--arcana-accent) 10%, #000 10%, #000 100%);
  background-blend-mode: lighten;
  background-attachment: fixed;
  background-size: cover;
  background-repeat: no-repeat;
  background-position: center;
  /* Places the background behind the theme's content */
  z-index: 0; 
  pointer-events: none;
  opacity:1;
}

/*
////////////////////////////////////////////////////////////////////////////////
// 2. HEADER SECTION
////////////////////////////////////////////////////////////////////////////////
*/

.arcana2-header {
  max-width: 100%;
  font-family: Helvetica, Arial, sans-serif;
  background: white;
  color: #111;
  position: relative;
  overflow: hidden;
  background-image: var(--arcana-pinup);
  background-size: contain;
  background-position: left top;
  background-repeat: no-repeat;
  border-radius: 1.25em 4px 1.25em 4px;
  margin-top: -10px;
  direction: ltr;
}

.arcana2-fixed-square {
  position: absolute;
  top: 0;
  right: 0;
  width: 9rem;
  height: 9rem;
  background: var(--arcana-accent);
  color: #000;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  writing-mode: vertical-rl;
  transform: rotate(180deg);
  font-weight: bold;
  font-size: 1rem;
  z-index: 0;
}

.arcana2-fixed-square .number {
  font-size: 3.25rem;
  line-height: 1;
  font-weight: 900;
  letter-spacing: -0.05em;
}

.arcana2-fixed-square .symbol {
  font-size: 1.5rem;
  margin-top: 0.25em;
  writing-mode: vertical-rl;
  text-orientation: upright;
  transform: rotate(180deg);
  letter-spacing: 0.15em;
}

.arcana2-content {
  position: relative;
  z-index: 1;
  padding: 10em 5vw 2.5em 5vw;
}

.arcana2-name-title {
  max-width: 30em;
  margin-left: auto;
  text-align: right;
  text-shadow: 0 0.15em #fff;
}

.arcana2-name-title .name {
  font-size: 4em;
  font-weight: 800;
  font-family: impact, tahoma, sans-serif;
  font-style: italic;
  text-transform: uppercase;
  line-height: 1;
  margin-bottom: 0.3em;
}

.arcana2-name-title .korean-name {
  display: block;
  font-weight: 400;
  font-size: 0.4em;
  margin-bottom: 0.15em;
}

.arcana2-name-title .english-name {
  font-size: 0.7em;
}

.arcana2-name-title .subtitle {
  font-size: 1.25em;
  font-weight: 500;
  line-height: 1.4;
}

/*
////////////////////////////////////////////////////////////////////////////////
// 3. MAIN CONTENT (BLURB, INTROS)
////////////////////////////////////////////////////////////////////////////////
*/

.arcana2-main-wrapper {
  max-width: 42em;
  margin: 3.5em auto 0 auto;
  padding: 0 5vw;
  color: #eee;
  font-family: Helvetica, Arial, sans-serif;
}

.arcana2-blurb {
  font-size: 1.2em;
  font-weight: 300;
  line-height: 1.7;
}

.arcana2-blurb p {
  margin-bottom: 2em;
  text-align: justify;
}

.arcana2-blurb img {
  display: block;
  width: 100%;
  margin: 1em 0;
  border-radius: 1.25em;
}

.arcana2-author-note {
  margin: 2.5em 0;
  border-top: 2px solid #bbb;
  padding-top: 1em;
  font-size: 0.95em;
  line-height: 1.5;
}

.arcana2-author-note p {
  margin-top: 1.5em;
}

/*
////////////////////////////////////////////////////////////////////////////////
// 4. INTROS SECTION
////////////////////////////////////////////////////////////////////////////////
*/

.arcana2-section-header {
  display: flex;
  justify-content: flex-end;
  align-items: center;
  margin-bottom: 2em;
}

.arcana2-section-header .line {
  flex: 1;
  height: 2px;
  background: #bbb;
  margin-right: 1em;
}

.arcana2-section-header .title {
  font-size: 2em;
  font-style: italic;
  font-weight: 700;
  text-transform: uppercase;
  font-family: impact, tahoma, sans-serif;
  padding: 0 5px;
  color: #fff;
}

.arcana2-intro-list {
  display: flex;
  flex-direction: column;
  gap: 0.25em;
}

.arcana2-intro-row {
  position: relative;
  background: #1a1a1a;
  color: #eee;
  padding: 1.2em 1.2em 1.2em 5em;
  border-radius: 0.44em;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.4);
}

.arcana2-intro-row .text {
  font-size: 1.05em;
  line-height: 1.6;
  margin-left: 8px;
}

.arcana2-intro-row .number-box {
  position: absolute;
  left: 0;
  top: 0;
  height: 100%;
  width: 3.8em;
  background: var(--arcana-accent);
  color: #000;
  writing-mode: vertical-rl;
  text-orientation: mixed;
  transform: rotate(180deg);
  font-weight: 800;
  font-size: 1.25em;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 0 0.4em 0.4em 0;
}

/*
////////////////////////////////////////////////////////////////////////////////
// 5. FOOTER SECTION
////////////////////////////////////////////////////////////////////////////////
*/

.arcana2-footer {
  max-width: 100%;
  font-family: Helvetica, Arial, sans-serif;
  background: #fff;
  color: #000;
  position: relative;
  border-top: 4px solid var(--arcana-accent);
  border-radius: 4px 1.25em 4px 1.25em;
  margin: 40px 0 0;
  padding: 2.5em 5vw 2em;
  text-align: center;
  overflow: hidden;
}

.arcana2-footer .shape {
  position: absolute;
  top: 0;
  right: 0;
  width: 9rem;
  height: 9rem;
  background: var(--arcana-accent);
  clip-path: polygon(0 0, 100% 0, 100% 100%);
  z-index: 0;
}

.arcana2-footer p, .arcana2-footer a {
  z-index: 1;
  position: relative;
}

.arcana2-footer .p1 { font-size: 1.2em; font-weight: 700; letter-spacing: .04em; margin: 0 0 .8em; color: black; }
.arcana2-footer .p2 { font-size: .9em; color: #444; margin: 0 0 1.4em; }
.arcana2-footer .p3 { font-size: .75em; color: #666; margin: 2em 0 0; font-style: italic; }

.arcana2-footer a { color: var(--arcana-accent); }
.arcana2-footer .p2 a { text-decoration: underline; }
.arcana2-footer .kofi-link { display: inline-block; }
.arcana2-footer .kofi-link img { height: 45px; border: none; }

/*
////////////////////////////////////////////////////////////////////////////////
// 6. DECK GRID SECTION
////////////////////////////////////////////////////////////////////////////////
*/

.arcana2-deck-wrapper {
  margin: 3em auto 0;
  max-width: 80vw;
  text-align: center;
  font-family: Helvetica, Arial, sans-serif;
}

.deck-grid { display: flex; flex-wrap: wrap; gap: .35em; justify-content: center; max-width: 80vw; margin: 0 auto; }
.deck-card { flex: 0 0 calc(20% - .35em); min-width: 118px; max-width: 140px; padding: .15em; box-sizing: border-box; text-decoration: none; }
.deck-card .skew { position: relative; width: 100%; aspect-ratio: 2/3; overflow: hidden; border-radius: 1em; transform: skewX(-9deg); transition: transform .25s, box-shadow .25s; }
.deck-card .skew::before { content: ""; position: absolute; inset: 0; border-radius: inherit; box-shadow: inset 0 0 0 2px rgba(255, 255, 255, .08); }
.deck-card img { width: 100%; height: 100%; object-fit: cover; transform: skewX(9deg) scale(1.22); transform-origin: center; transition: filter .25s; }
.deck-card:hover .skew { transform: skewX(-9deg) translateY(-6px) scale(1.03); box-shadow: 0 0 0 2px #2efcff, 0 0 20px rgba(46, 252, 255, .45), 0 0 28px rgba(255, 79, 201, .35); }
.deck-card:hover img { filter: saturate(1.15) brightness(1.05); }

@media (max-width: 920px) { .deck-card { flex: 0 0 calc(25% - .35em); } }
@media (max-width: 700px) { .deck-card { flex: 0 0 calc(33.333% - .35em); } }
@media (max-width: 520px) { .deck-card { flex: 0 0 calc(50% - .35em); } }
@media (max-width: 360px) { .deck-card { flex: 0 0 100%; } }

/*
////////////////////////////////////////////////////////////////////////////////
// 7. CHUB UI OVERRIDES (GLOBAL)
////////////////////////////////////////////////////////////////////////////////
*/

/* THIS IS THE DEFINITIVE FIX: Makes all platform wrappers transparent */
.ant-layout, .ant-layout-content, .ant-col, .ant-list-item {
  background: transparent !important;
}

.ant-space.css-f6nzt4.ant-space-horizontal.ant-space-align-center .ant-tag { background: #222 !important; color: rgba(255 255 255 0.3) !important; border: none !important; border-radius: 4px !important; padding: .15em .55em !important; font-size: .8rem !important; font-weight: 400 !important; pointer-events: none !important; cursor: default !important; opacity: .9 !important; }
.ant-typography { display: none; }
.ant-image-img { border-radius: 16px !important; }
.ant-image-mask { border-radius: 16px !important; }
div.msg-mkdn-container>p:first-of-type:has(strong) { display: none !important; }
.ant-space.css-f6nzt4.ant-space-horizontal.ant-space-align-center { max-height: none !important; overflow: visible !important; flex-wrap: wrap !important; }
.ant-ribbon.ant-ribbon-placement-end.css-f6nzt4 { display: none !important; }
.ant-menu-overflow.ant-menu.ant-menu-root.ant-menu-horizontal.ant-menu-dark.css-f6nzt4 { background-color: rgb(0, 0, 0, 0) !important; }
.ant-layout-header { background-color: rgb(0, 0, 0, 0) !important; }
.ant-menu-overflow-item.ant-menu-item.ant-menu-item-only-child.no-padding.ml-0.pl-0.mr-2 { background-color: rgb(0, 0, 0, 0) !important; }
.ant-rate span[aria-label="star"] svg { animation: none !important; fill: currentColor !important; }
@keyframes star-pulse { 0% { transform: scale(1); } 50% { transform: scale(1.3); } 100% { transform: scale(1); } }
div#chara-list { display: none !important; }
a[href="/"] img[src*="logo"] { display: none !important; }
.ant-layout-header a[href="/"]::before, .ant-layout-header a[href="/"]::after { content: none !important }
.bb-float-home { position: fixed; top: calc(12px + env(safe-area-inset-top)); left: calc(12px + env(safe-area-inset-left)); width: 100px; height: 100px; display: block; z-index: 2147483646; pointer-events: auto; text-decoration: none; outline: 0; transform: translateZ(0) }
.bb-float-home::before, .bb-float-home::after { content: ""; position: absolute; inset: 0; background-repeat: no-repeat; background-position: center; background-size: contain; pointer-events: none }
.bb-float-home::before { background-image: url("https://files.catbox.moe/k5bxey.svg"); animation: bb-bob 3.4s ease-in-out infinite }
.bb-float-home::after { background-image: url("https://files.catbox.moe/os7ubg.svg"); animation: bb-throb 3.4s ease-in-out infinite }
@keyframes bb-bob { 0%, 100% { transform: translateY(0) } 50% { transform: translateY(8px) } }
@keyframes bb-throb { 0%, 100% { transform: translateY(0) scale(1) } 25%, 75% { transform: translateY(4px) scale(1.08) } 50% { transform: translateY(8px) scale(1.18) } }
@media(max-width: 600px) { .bb-float-home { top: calc(8px + env(safe-area-inset-top)); left: calc(8px + env(safe-area-inset-left)); width: 80px; height: 80px } }
.ant-layout, .ant-layout-content { width: 100% !important; }


/*
////////////////////////////////////////////////////////////////////////////////
// 7. CHUB UI OVERRIDES (UPGRADED FROM ARCANA 3)
////////////////////////////////////////////////////////////////////////////////
*/

/* --- KEYFRAMES FOR BUTTON ANIMATIONS --- */
@keyframes -sonar { 0% { box-shadow: 0 0 0 0 var(--sonar-color); } 70% { box-shadow: 0 0 0 12px rgba(255, 255, 255, 0); } 100% { box-shadow: 0 0 0 0 rgba(255, 255, 255, 0); } }
@keyframes gentle-shake {0%, 80% {transform: translateX(-12px) scale(1.15) rotate(0deg);}84% {transform: translateX(-12px) scale(1.15) rotate(-5deg);}88% {transform: translateX(-12px) scale(1.15) rotate(4deg);}92% {transform: translateX(-12px) scale(1.15) rotate(-2deg);}96% {transform: translateX(-12px) scale(1.15) rotate(1deg);}100% {transform: translateX(-12px) scale(1.15) rotate(0deg);}}
@keyframes star-glow {0%, 100% {filter: drop-shadow(0 0 5px rgb(from var(--arcana-accent) r g b / 0.7));}50% {filter: drop-shadow(0 0 16px var(--arcana-accent));}}
@keyframes star-pulse { 0% { transform: scale(1); } 50% { transform: scale(1.3); } 100% { transform: scale(1); } }
@keyframes bb-bob { 0%, 100% { transform: translateY(0) } 50% { transform: translateY(8px) } }
@keyframes bb-throb { 0%, 100% { transform: translateY(0) scale(1) } 25%, 75% { transform: translateY(4px) scale(1.08) } 50% { transform: translateY(8px) scale(1.18) } }



/* --- GENERAL BUTTON STYLES --- */
button.ant-btn {
  position: relative;
  align-items: center !important;
  justify-content: center !important;
  gap: .5em;
  white-space: nowrap;
  font-weight: 700 !important;
  font-size: 14px !important;
  height: 48px !important;
  min-width: 64px !important;
  padding: .5em 1.4em !important;
  border-radius: 8px !important;
  transition: transform .15s, box-shadow .15s, background-color .25s, color .25s, border-color .25s;
  cursor: pointer;
  overflow: visible !important;
  isolation: isolate;
}
button.ant-btn:hover { box-shadow: none !important; }
button.ant-btn:active { transform: translateY(1px); }

/* Default Button (Import/Download) */
button.ant-btn.ant-btn-default {
  background: #000 !important;
  color: #fff !important;
  border: 1px solid #fff !important;
  box-shadow: 0px 2px 0 #fff;
}

/* Primary Button (Main Chat Button) */
button.ant-btn.ant-btn-primary {
  background: var(--arcana-accent) !important;
  color: #000 !important;
  border: 1px solid #000 !important;
  box-shadow: 0px 2px 0 #000 !important;
}

/* "Show More" Button */
button.sc-ifyrAs {
  display: inline-block !important;
  font-size: 14px !important;
  font-weight: 700 !important;
  height: 40px !important;
  padding: 0 2em !important;
  border-radius: 8px !important;
  background: #000 !important;
  color: #fff !important;
  border: 0.5px solid #fff !important;
  box-shadow: 0 2px 0 #fff;
  cursor: pointer;
  transition: transform 0.15s, box-shadow 0.15s, background-color 0.25s, color 0.25s, border-color 0.25s;
  font-family: Helvetica, Arial, sans-serif !important;
  position: relative !important;
  overflow: visible !important;
  isolation: isolate;
}
button.sc-ifyrAs:hover {
  background: #fff !important;
  color: #000 !important;
  box-shadow: none !important;
}

/* Sonar/Pulse Animation for Buttons */
button.ant-btn:has(svg.lucide-messages-square)::after,
button.sc-ifyrAs::after,
button.ant-btn:has(.anticon-star)::after {
  content: "";
  position: absolute;
  inset: -2px;
  border-radius: inherit;
  --sonar-color: var(--arcana-accent);
  box-shadow: 0 0 0 0 var(--sonar-color);
  animation: -sonar 2.8s ease-out infinite !important;
  pointer-events: none;
  z-index: -1;
  display: block !important;
}

/* --- FAVORITE BUTTON STYLES --- */
button.ant-btn:has(.anticon-star svg path[d*="M664.8 561.6"]) {
  position: fixed !important;
  right: 24px !important;
  bottom: 24px !important;
  z-index: 2147483647 !important;
}
@media(max-width:785px) {
  button.ant-btn:has(.anticon-star svg path[d*="M664.8 561.6"]) {
    right: 16px !important;
    bottom: 16px !important;
    padding: 6px 10px !important;
    font-size: 12px !important;
    line-height: 1 !important;
  }
}
button.ant-btn:has(.anticon-star svg path[d*="zM"]) {
  transform: translateX(-12px) scale(1.15);
  animation: gentle-shake 6s ease-in-out infinite;
}
button.ant-btn:has(.anticon-star svg path[d*="zM"]) .anticon-star svg {
  animation: star-glow 2.5s ease-in-out infinite;
  overflow: visible;
}
button.ant-btn:has(.anticon-star svg path[d*="zM"]) .anticon-star svg path {
  fill: var(--arcana-accent);
  stroke: none;
}
button.ant-btn:has(.anticon-star):not(:has(svg path[d*="zM"])) {
  animation: none !important;
  transform: none !important;
}
button.ant-btn:has(.anticon-star):not(:has(svg path[d*="zM"])) .anticon-star svg {
  animation: none !important;
  filter: none !important;
  overflow: hidden;
}
button.ant-btn:has(.anticon-star):not(:has(svg path[d*="zM"])) .anticon-star svg path {
  fill: currentColor !important;
  stroke: none;
}
button.ant-btn:has(.anticon-star):not(:has(svg path[d*="zM"]))::after {
  animation: none !important;
  display: none !important;
}

/* --- OTHER FLOATING UI ELEMENTS --- */
.bb-float-home { position: fixed; top: calc(12px + env(safe-area-inset-top)); left: calc(12px + env(safe-area-inset-left)); width: 100px; height: 100px; display: block; z-index: 2147483646; pointer-events: auto; text-decoration: none; outline: 0; transform: translateZ(0) }
.bb-float-home::before, .bb-float-home::after { content: ""; position: absolute; inset: 0; background-repeat: no-repeat; background-position: center; background-size: contain; pointer-events: none }
.bb-float-home::before { background-image: url("https://files.catbox.moe/k5bxey.svg"); animation: bb-bob 3.4s ease-in-out infinite }
.bb-float-home::after { background-image: url("https://files.catbox.moe/os7ubg.svg"); animation: bb-throb 3.4s ease-in-out infinite }
@media(max-width: 600px) { .bb-float-home { top: calc(8px + env(safe-area-inset-top)); left: calc(8px + env(safe-area-inset-left)); width: 80px; height: 80px } }

/*
=================================================================
  ARCANA THEME CORRECTIONS
=================================================================
*/

/* --- FIX 1: Force Correct Arcana Tag Style --- */
/* This more specific selector ensures the cut-corner style is applied correctly. */
.ant-space.css-f6nzt4.ant-space-horizontal.ant-space-align-center .ant-tag,
.ant-tag {
  background: rgba(255, 255, 255, .5) !important;
  color: #000 !important;
  border: none !important;
  border-radius: 0 !important; /* Remove border-radius to allow clip-path to work */
  padding: .10em .50em !important;
  font-size: .6rem !important;
  font-weight: 700 !important;
  text-transform: uppercase !important;
  transition: background .2s, color .2s !important;
  clip-path: polygon(0 0, 100% 0, 100% calc(100% - 6px), calc(100% - 6px) 100%, 0 100%) !important;
}

.ant-tag:hover {
  background: #000 !important;
  color: #fff !important;
  cursor: pointer;
}

div.flex.flex-wrap.justify-end {
  justify-content: flex-start !important;
}
.dOesoR,.hFiwlk,.cSOzTo,.bPlxTo,.isKXvo,.dAxClk,.fRJWto,.gYqOac{min-height:100%;max-height:24rem}.dOesoR::after,.hFiwlk::after,.cSOzTo::after,.bPlxTo::after,.isKXvo::after,.dAxClk::after,.fRJWto::after,.gYqOac::after{display:none}


.bb-float-home {
  background: transparent !important;
}
.bb-float-home::before,
.bb-float-home::after {
  pointer-events: auto !important;
}

@media (max-width: 768px) {

  button.ant-btn.ant-btn-icon-only:has(.anticon-star svg path[d*="zM"]) {
    /* --- Positioning Overrides --- */
    position: fixed !important;
    bottom: 16px !important;
    left: 16px !important;
    right: 16px !important;
    
    /* --- Sizing Override --- */
    width: auto !important; /* Stretches the button */
    
    /* --- Animation Reset --- */
    /* Stops the corner-specific 'gentle-shake' animation from running on the full-width bar */
    transform: none !important;
    animation: none !important;
  }
  
  /* 
    Re-applies the desired sonar pulse animation to the full-width button.
  */
  button.ant-btn.ant-btn-icon-only:has(.anticon-star svg path[d*="zM"])::after {
      animation: -sonar 2.8s ease-out infinite !important;
  }
}

