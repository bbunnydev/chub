/* 
  Chub.ai Ant Design Override - KakaoTalk Theme 
/*
  Chub.ai Ant Design Override - KakaoTalk Theme
  Author: Antigravity
  Description: Overrides standard Ant Design list classes to mimic KakaoTalk's UI.
  Target: Chat Interface using .ant-list-item-meta structure.
*/

/* =========================================
   1. GLOBAL VARIABLES & RESET (DARK MODE)
   ========================================= */
:root {
    --kakao-bg: #1f1f1f;
    /* Dark Grey Background to match Chub/Dark mode */
    --kakao-yellow: #fada0c;
    /* Slightly muted Kakao Yellow for Dark Mode */
    --kakao-bubble: #363636;
    /* Dark Grey for Received Bubbles */
    --kakao-text: #e0e0e0;
    /* Light Text */
    --kakao-text-inverse: #1f1f1f;
    /* Dark Text for Yellow bubbles */
    --kakao-meta: #8c8c8c;
    /* Meta Grey */
    --kakao-radius: 12px;
}

/* Force the main chat container background */
body,
.ant-layout,
.ant-layout-content,
div[class*="chat-history"],
.chat-container {
    background-color: var(--kakao-bg) !important;
}

/* =========================================
   2. MESSAGE ROW (LIST ITEM)
   ========================================= */
/* Remove default separators and spacing */
/* Remove default separators and spacing */
.ant-list-item,
.ant-list-item.alpha-background,
.message-full {
    background-color: transparent !important;
    background: transparent !important;
    /* Override gradient/alpha backgrounds */
    border: none !important;
    box-shadow: none !important;
    padding: 4px 12px !important;
    /* Tighter padding for Kakao feel */
    display: flex !important;
    align-items: flex-start !important;
    margin-bottom: 8px !important;
    /* Space between actual messages */
}

/* main flex container for the message */
.ant-list-item-meta {
    display: flex !important;
    align-items: flex-start !important;
    width: 100% !important;
    margin-bottom: 2px !important;
}

/* =========================================
   3. AVATAR STYLING (REMOVED)
   ========================================= */
/* Avatar overrides removed as requested */
.ant-list-item-meta-avatar {
    /* Keeping structure but removing specific style overrides */
    margin-right: 10px !important;
    align-self: flex-start;
}

/* =========================================
   4. MESSAGE CONTENT WRAPPER
   ========================================= */
.ant-list-item-meta-content {
    display: flex !important;
    flex-direction: column !important;
    align-items: flex-start !important;
    width: auto !important;
    max-width: 85% !important;
}

/* =========================================
   5. MESSAGE HEADER (NAME)
   ========================================= */
.ant-list-item-meta-title {
    font-size: 13px !important;
    color: var(--kakao-meta) !important;
    font-weight: 500 !important;
    margin-bottom: 4px !important;
    margin-left: 2px !important;
    line-height: 1.2 !important;
}

/* Hide the user name if it's the current user (if distinct class exists)
   or styling it to be subtle. */

/* =========================================
   6. BUBBLE STYLING (DESCRIPTION)
   ========================================= */
.ant-list-item-meta-description {
    position: relative !important;
    background-color: var(--kakao-bubble) !important;
    color: var(--kakao-text) !important;
    padding: 8px 12px !important;
    border-radius: 2px 14px 14px 14px !important;
    /* Top-left corner sharp for tail */
    box-shadow: 0 1px 1px rgba(0, 0, 0, 0.2) !important;
    font-size: 14px !important;
    line-height: 1.5 !important;
    width: fit-content !important;
    min-width: 20px;
}

/* Message Tail (Left Side) */
.ant-list-item-meta-description::before {
    content: "";
    position: absolute;
    top: 0px;
    left: -6px;
    width: 0;
    height: 0;
    border-style: solid;
    border-width: 0 8px 8px 0;
    border-color: transparent var(--kakao-bubble) transparent transparent;
    display: block;
}

/* Ensure text inside bubbles respects default but allows overrides */
/* Removed wildcard * selector to preserve specific span colors (like red text) */

/* Markdown Container fixes */
.msg-mkdn-container p {
    margin: 0 !important;
}

/* =========================================
   7. USER MESSAGES (RIGHT SIDE)
   ========================================= */
/*
   Assuming .is-user or similar class exists.
   Uncomment and adjust class name when known.
*/
/*
.ant-list-item.is-user .ant-list-item-meta {
  flex-direction: row-reverse !important;
}

.ant-list-item.is-user .ant-list-item-meta-avatar {
  margin-right: 0 !important;
  margin-left: 10px !important;
  display: none !important; /* Kakao usually hides my avatar */
}

.ant-list-item.is-user .ant-list-item-meta-content {
    align-items: flex-end !important;
}

.ant-list-item.is-user .ant-list-item-meta-title {
    display: none !important;
    /* Hide my name */
}

.ant-list-item.is-user .ant-list-item-meta-description {
    background-color: var(--kakao-yellow) !important;
    color: var(--kakao-text-inverse) !important;
    border-radius: 14px 2px 14px 14px !important;
}

.ant-list-item.is-user .ant-list-item-meta-description::before {
    left: auto !important;
    right: -6px !important;
    border-width: 8px 8px 0 0 !important;
    border-color: var(--kakao-yellow) transparent transparent transparent !important;
    transform: rotate(90deg);
}

*/

/* =========================================
   8. INPUT AREA OVERRIDES
   ========================================= */
/* Target the input area wrapper container if possible */
.ant-layout-footer,
div[class*="input-container"] {
    background-color: #2b2b2b !important;
    border-top: 1px solid #383838 !important;
    padding: 10px !important;
}

/* Input box itself */
textarea.ant-input {
    background-color: #383838 !important;
    border: 1px solid #484848 !important;
    border-radius: 20px !important;
    padding: 8px 12px !important;
    color: #fff !important;
    resize: none !important;
}

textarea.ant-input:focus {
    background-color: #404040 !important;
    border-color: var(--kakao-yellow) !important;
    box-shadow: 0 0 0 2px rgba(250, 218, 12, 0.1) !important;
}

/* Send Button */
button.ant-btn-primary {
    background-color: var(--kakao-yellow) !important;
    border-color: var(--kakao-yellow) !important;
    color: #1f1f1f !important;
}

/* =========================================
   9. MESSAGE CONTROLS (EDIT/SWIPE/DELETE)
   ========================================= */
/* Restore container to normal Flex flow so Edit/Delete buttons appear naturally */
/* We target the div containing buttons, resetting it to standard static/flex behavior */
#chat-messages .message-full>div:has(> button.message-control-buttons),
.ant-list-item>div:has(> button.message-control-buttons),
div:has(> button.message-control-buttons) {
    display: flex !important;
    position: static !important;
    /* Keep it in the bubble flow! */
    flex-direction: row !important;
    align-items: center !important;
    justify-content: flex-end !important;
    gap: 4px !important;
    margin-top: 8px !important;
    padding-top: 4px !important;
    border-top: 1px solid rgba(255, 255, 255, 0.1) !important;
    width: 100% !important;
    min-height: 28px !important;
}

/* Pagination Text (e.g. 1/5) - Keep visible but subtle */
div:has(> button.message-control-buttons)>span {
    font-size: 11px !important;
    color: rgba(255, 255, 255, 0.4) !important;
    font-family: monospace !important;
    margin-right: auto !important;
    /* Push buttons to right */
    padding-left: 4px !important;
    display: block !important;
}

/* Standard Control Buttons (Edit, Delete, etc.) - Default Styling */
button.message-control-buttons {
    position: relative !important;
    /* Keep them in flow */
    color: rgba(255, 255, 255, 0.4) !important;
    background: transparent !important;
    border: none !important;
    box-shadow: none !important;
    width: 24px !important;
    height: 24px !important;
    min-width: 24px !important;
    padding: 0 !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    opacity: 1 !important;
    /* Ensure visibility */
    z-index: 10 !important;
    bottom: auto !important;
    /* Override any previous absolute bottom */
    right: auto !important;
    /* Override any previous absolute right */
}

button.message-control-buttons:hover {
    color: var(--kakao-yellow) !important;
    background: rgba(255, 255, 255, 0.05) !important;
    border-radius: 4px !important;
}

/* =========================================
   10. STICKY PAGINATION (NEXT/PREV ONLY)
   ========================================= */
/* Ensure the BUBBLE is the positioning context */
.ant-list-item-meta-description {
    position: relative !important;
}

/* Force ONLY the Pagination Arrows to be Sticky/Absolute */
/* Position relative to the BUBBLE (.ant-list-item-meta-description) */
button.message-control-buttons:has(svg[data-icon="right"]),
button.ant-btn-circle.message-control-buttons:has(svg[data-icon="right"]),
button.message-control-buttons:has(svg[data-icon="left"]),
button.ant-btn-circle.message-control-buttons:has(svg[data-icon="left"]) {
    position: absolute !important;
    bottom: -16px !important;
    z-index: 100 !important;
    width: 32px !important;
    height: 32px !important;
    background: rgba(40, 40, 50, 0.95) !important;
    border: 1px solid rgba(255, 255, 255, 0.15) !important;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4) !important;
    border-radius: 50% !important;
    margin: 0 !important;
    color: #fff !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
}

/* Right Arrow (Next) */
button.message-control-buttons:has(svg[data-icon="right"]),
button.ant-btn-circle.message-control-buttons:has(svg[data-icon="right"]) {
    right: -10px !important;
}

/* Left Arrow (Prev) */
button.message-control-buttons:has(svg[data-icon="left"]),
button.ant-btn-circle.message-control-buttons:has(svg[data-icon="left"]) {
    right: 34px !important;
}

/* Hover effects for sticky buttons */
button.message-control-buttons:has(svg[data-icon="left"]):hover,
button.message-control-buttons:has(svg[data-icon="right"]):hover {
    background: var(--kakao-yellow) !important;
    color: #1f1f1f !important;
    transform: scale(1.1) !important;
}
