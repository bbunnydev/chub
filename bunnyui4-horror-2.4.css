/*
============================================================
  FINAL MODIFICATIONS & CORRECTIONS (OCT 2025)
============================================================
*/

/* --- CORE THEME ADJUSTMENTS --- */

/* 1. Style spoken dialogue in the tagline */
.bb-tagline i {
  color: var(--horror-red);
  text-shadow: 0 0 6px var(--horror-red), 0 0 10px rgba(255, 25, 25, 0.5);
  font-style: normal; /* Removes italics for a cleaner glow effect */
}

/* 2. Shrink preset badges */
.bb-badge {
    font-size: 12px !important;
    padding: .5em .9em;
}

/* 3. Center Ko-fi button text and remove extra emoji */
.bb-support .bb-kbtn > span {
    display: block;
    text-align: center;
}

/* 4. Apply monospace font to Author's Note heading */
.bb-meta-hdr {
    font-family: var(--font-heading) !important;
}

/* 5. Shrink button text */
button.ant-btn { font-size: 14px !important; }
button.sc-ifyrAs { font-size: 14px !important; }
button.ant-btn:has(svg.lucide-messages-square) { font-size: 15px !important; }

/* 6. Give preset buttons/tags the monospace font */
.bb-presets-label, .bb-badge { font-family: var(--font-heading) !important; }

/* 7. Ensure correct button text colors */
button.ant-btn.ant-btn-primary,
button.ant-btn:has(svg.lucide-messages-square) {
  color: #fff !important;
}

/* 8. Add a spoiler tag before the first collapse header */
.ant-collapse-item:first-of-type .ant-collapse-header .ant-collapse-header-text::before {
  content: 'SPOILERS';
  display: inline-block;
  background: var(--horror-red);
  color: #fff;
  padding: 3px 8px;
  margin-right: 12px;
  font-family: var(--font-heading);
  font-size: 10px;
  font-weight: 700;
  letter-spacing: .1em;
  vertical-align: middle;
}

/* --- HEADER 'REC' INDICATOR --- */

/* Hide original logo image */
.ant-menu-item a[href="/"] img[src*="logo"] { display: none !important; }

/* Style the link container to align items horizontally */
.ant-menu-item a[href="/"] {
  display: flex !important;
  align-items: center !important;
  gap: 8px;
  text-decoration: none !important;
}

/* Create the glowing red circle */
.ant-menu-item a[href="/"]::before {
  content: '';
  display: block;
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background-color: var(--horror-red);
  box-shadow: 0 0 5px var(--horror-red), 0 0 10px var(--horror-red);
  animation: rec-glow 2s ease-in-out infinite;
  flex-shrink: 0; /* Prevents the circle from shrinking */
}

/* Create the 'REC' text */
.ant-menu-item a[href="/"]::after {
  content: 'REC';
  font-family: var(--font-heading);
  font-size: 16px;
  color: var(--horror-text);
  text-transform: uppercase;
  letter-spacing: .1em;
}

/* Animation for the REC indicator glow */
@keyframes rec-glow {
  0%, 100% { box-shadow: 0 0 5px var(--horror-red), 0 0 10px var(--horror-red); opacity: 1; }
  50% { box-shadow: 0 0 10px var(--horror-red), 0 0 20px var(--horror-red); opacity: 0.7; }
}


/* --- HERO IMAGE GLITCH EFFECT --- */

/* Create a pseudo-element on the hero container for the glitch image */
.bbx-hero::after {
    content: '';
    position: fixed; /* Match the original hero image positioning */
    right: 0;
    bottom: 0;
    width: min(850px, 48vw); /* Match original hero */
    height: 100vh; /* Match original hero */
    background: url('https://avatars.charhub.io/avatars/uploads/images/gallery/file/68b02f10-611d-4c1d-ad3d-95a50995dbbe/b3e92979-4e21-4c52-acd8-abb9b93ec9e2.webp') right bottom / contain no-repeat !important;
    pointer-events: none;
    z-index: 2; /* Ensure it appears on top of the original hero */
    opacity: 0; /* Start invisible */
    /* Animation: name duration iteration-count fill-mode */
    animation: glitch-flicker 22s forwards;
}

/* Keyframes for the glitch effect */
@keyframes glitch-flicker {
    /* Wait for ~20 seconds */
    0%, 90% {
        opacity: 0;
    }
    /* First flicker */
    91% {
        opacity: 1;
    }
    91.5% {
        opacity: 0;
    }
    /* Second, longer flicker */
    91.8% {
        opacity: 1;
    }
    92.8% {
        opacity: 0;
    }
    /* Ensure it stays hidden */
    100% {
        opacity: 0;
    }
}
